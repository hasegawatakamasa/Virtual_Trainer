# Product Overview - 推しトレ (Oshi-Tre)

## Product Description

**推しトレ** (Oshi-Tre) は、AIを活用してリアルタイムで筋力トレーニングのフォームを分析し、フィードバックを提供するAIフィットネスアプリです。単調な筋トレを、AIコンパニオンと共に冒険するRPG（ロールプレイングゲーム）へと昇華させることを目指しています。

## Core Features

### MVP Features (Currently Implemented)
- **リアルタイム姿勢推定**: Webカメラ/スマートフォンカメラ映像からユーザーの骨格を検出し、動きを追跡
- **AIフォーム自動判定**: オーバーヘッドプレスなどのエクササイズにおいて、肘の角度などを基にフォームの正誤を判定
- **自動レップカウント**: 正しいフォームでの繰り返し回数を自動でカウント
- **即時フィードバック**: "Normal"や"Elbow Error"といった形で、フォームに対するフィードバックを画面上にリアルタイム表示
- **キーポイント可視化**: 検出された17個のボディキーポイントをスケルトン形式で画面に表示
- **種目選択システム**: 
  - **エクササイズ選択画面**: 6種目（オーバーヘッドプレス、スクワット、プランク、腕立て伏せ、ランジ、バーピー）から選択可能
  - **前回トレーニング表示**: 前回選択した種目のハイライト表示と履歴管理
  - **段階的リリース**: オーバーヘッドプレスのみ利用可能、他種目は「近日公開」表示で将来対応
- **推しトレーナー選択システム**:
  - **トレーナーキャラクター**: 性格・口調・ビジュアルを持つトレーナーとの絆を育む
  - **デフォルトトレーナー「推乃 藍」**: ツンデレ性格の初期トレーナー（一人称：うち、二人称：あんた）
  - **音声キャラクター連携**: トレーナーに音声キャラクター（ずんだもん等）を紐付け
  - **ビジュアル選択画面**: トレーナー画像表示で見た目と性格を確認しながら選択
  - **スワイプUI**: 左右スワイプで直感的なトレーナー切り替え
  - **音声プレビュー機能**: トレーナー選択前にランダム音声サンプルを試聴可能（回数カウント・フォームエラー等）
  - **専用設定画面**: トレーナー選択・プレビュー再生・確定の統合UI
  - **データマイグレーション**: 既存音声設定からトレーナー設定への自動移行
  - **将来拡張対応**: カスタムトレーナー作成・複数トレーナー管理の設計済み
- **音声フィードバックシステム**:
  - **マルチキャラクター対応**: ずんだもん・四国めたん の2キャラクターから選択可能
  - **フォームエラー音声**: 肘エラー検出時にキャラクター別音声で警告
  - **回数カウント音声**: レップ完了時に「いち、に、さん...」をキャラクター音声で読み上げ
  - **速度フィードバック音声**: 動作が速すぎる/遅い場合のキャラクター別励ましと警告
  - **アチーブメント音声**: マイルストーン達成時の特別な音声フィードバック
  - **VOICEVOX統合**: 複数キャラクターによる親しみやすい音声指導
  - **設定可能**: 音声ON/OFF とキャラクター選択を自由に切り替え可能
  - **ライセンス対応**: キャラクター別VOICEVOXクレジット表示
- **動作速度分析**: 
  - **リアルタイム速度検知**: キーポイント数に基づく動作速度の自動分析
  - **適応的フィードバック**: 速すぎる/遅すぎる動作に対する音声警告とコーチング
  - **エクササイズゾーン連動**: アクティブな運動状態でのみ速度分析を実行
- **エクササイズゾーン検知**: アクティブな運動状態と準備状態を自動判別
- **60秒タイマーセッション**:
  - **自動セッション管理**: 60秒のタイマー制御によるトレーニングセッション
  - **開始メッセージ表示**: カウントダウン付きセッション開始演出
  - **タイマー表示**: リアルタイムの残り時間表示とマイルストーン通知
  - **自動終了機能**: タイムアップ時の自動セッション終了
  - **リザルト画面遷移**: セッション完了後の成果表示画面へ自動遷移
  - **中断処理**: セッション中断時の適切なリソース管理と再開機能
- **プライバシー重視**: 全ての処理をデバイス内で完結（オンデバイス推論）
- **システムリソース管理**: 
  - **自動クリーンアップシステム**: カメラセッション・音声リソースの統合管理
  - **メモリリーク防止**: 包括的なリソース生成・解放サイクル管理
  - **パフォーマンス最適化**: システムリソース使用量の効率的制御
- **トレーニング記録システム**: 
  - **Core Data統合**: 永続的なトレーニングデータ保存
  - **セッション記録**: 日時、種目、回数、フォーム精度の自動記録
  - **履歴管理**: 過去のトレーニング履歴閲覧と統計表示
  - **進捗トラッキング**: 週間/月間のトレーニング進捗可視化
- **推しシステム（Oshi System）**: 
  - **キャラクター好感度**: トレーニング頻度に応じた好感度システム
  - **レベルアップ機能**: 累積トレーニングによるキャラクターレベル上昇
  - **特別リアクション**: マイルストーン達成時の推し専用音声・アニメーション
  - **コレクション要素**: アチーブメント解除による推しコンテンツ収集
- **アチーブメントシステム**: 
  - **マイルストーン達成**: 100回、500回、1000回達成の特別演出
  - **連続記録**: 3日、7日、30日連続トレーニング達成報酬
  - **パーソナルベスト**: 自己記録更新時の特別フィードバック
  - **カムバック機能**: 長期休暇後の復帰を歓迎する特別メッセージ
  - **シェア促進**: SNS共有を促すアチーブメント達成通知
- **進捗可視化**:
  - **週間チャート**: 7日間のトレーニング量をグラフ表示
  - **月間サマリー**: 月次統計とトレンド分析
  - **記録タブ**: 専用UIでの詳細な記録閲覧と分析
- **Googleカレンダー連携通知システム**:
  - **OAuth 2.0認証**: NotionやSlack風の標準的なGoogleカレンダー連携フロー
  - **スケジュール解析**: 7日間の予定を自動取得し、隙間時間・空き時間を自動検出
  - **推しトレーナー通知**: トレーナーの名前・アイコン・口調で通知を配信
  - **インテリジェント通知**: 30分以上の隙間時間や予定なし日を検出して最適なタイミングで通知
  - **通知カスタマイズ**: 頻度（1日1〜3回）・時間帯・曜日の細かい設定
  - **バックグラウンド同期**: BGTaskSchedulerによる予定変更の自動反映
  - **通知効果測定**: タップ率・トレーニング実施率の追跡と学習による最適化
  - **プライバシー保護**: イベント時刻のみ使用、詳細は保存せず、全てデバイス内処理
  - **セキュアストレージ**: iOS Keychainによるトークンの安全な保存

### Future Features (Planned)
- **AIコンパニオンシステム**: 選べるトレーナータイプ（熱血教官、クールな参謀、元気な後輩）
- **RPGゲーミフィケーション**: レベル、ステータス（STR, AGI, VIT）、スキルツリー、実績システム
- **クエストモード**: ストーリー仕立てのワークアウト体験
- **音声フィードバック拡張**: カスタマイズ可能なキャラクター音声と個性的な応援メッセージ
- **カスタムトレーナーパーソナライゼーション**: ユーザー好みに合わせたトレーナーキャラクターのカスタマイズ機能
- **プッシュ通知システム**: トレーニングリマインダーと推しキャラクターからの応援通知
- **マルチエクササイズ対応拡張**: スクワット、サイドレイズ等の追加種目の完全実装

## Target Use Case

### Primary Target User
- **名前**: ユウキ（20代半ばのITエンジニア・ゲーマー）
- **課題**: 
  - 慢性的な運動不足と体の不調
  - ジムへの心理的ハードルの高さ
  - 自宅筋トレの3日坊主問題
- **モチベーション**: ゲームのレベル上げや推しキャラからの承認

### Specific Use Cases
1. **自宅での筋力トレーニング**: アームカール、スクワット、プランクなどの基本的なエクササイズ
2. **フォーム矯正**: 初心者や独学者の正しいフォーム習得をサポート
3. **運動習慣の定着**: ゲーミフィケーション要素により継続性を向上
4. **プライベートトレーニング**: ジムに行かずに自宅でプライベートな運動環境を提供

## Key Value Proposition

### 1. 徹底した世界観とゲーミフィケーション
単なるポイントやバッジではなく、「レベル」「ステータス」「スキル」「クエスト」といったRPGの根幹システムをフィットネスに完全統合

### 2. 感情的エンゲージメント
AIコンパニオンとの対話と共闘を通じて、ツールとユーザーの関係を超えた「相棒」としての愛着を形成。**「推しに褒められたいから頑張る」**というオタク心理を的確に突く

### 3. 高精度なAI技術
- YOLO11n-poseによる17ポイント姿勢推定
- GRUモデルによる高精度フォーム分類
- Core ML活用によるリアルタイム推論（50ms以下）

### 4. プライバシーファースト
全ての画像処理・AI推論をデバイス内で完結。ユーザーのトレーニング映像が外部に送信されることはない

### 5. 安定性・パフォーマンス
- **包括的リソース管理**: カメラセッション終了時の自動リソースクリーンアップ
- **メモリリーク防止**: 統合クリーンアップサービスによる安定した長時間使用

### 6. クロスプラットフォーム対応
- Python版: デスクトップ環境での高度な分析
- iOS版: いつでもどこでも手軽にトレーニング
- モデル変換パイプライン: PyTorch → ONNX → Core ML の自動変換対応

## Success Metrics

### Engagement Metrics
- Daily Active Users (DAU)
- Session Duration
- Weekly Workout Frequency
- Feature Usage Rates

### Fitness Metrics
- Correct Form Rate
- Rep Count Accuracy
- User Progress Tracking
- Exercise Variety Adoption

### Retention Metrics
- Day 1, 7, 30 Retention Rates
- Churn Analysis
- User Lifetime Value

## Competitive Landscape

### Direct Competitors
- Nike Training Club
- Freeletics
- Mirror Home Gym

### Unique Differentiators
- **オタク文化特化**: アニメ・ゲームファンに特化したUX/UI
- **AI技術の高度活用**: リアルタイム姿勢推定とフォーム分析
- **完全プライベート**: オンデバイス処理によるプライバシー保護
- **RPGゲーミフィケーション**: 従来のフィットネスアプリにない深い世界観